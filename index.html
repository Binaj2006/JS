<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hentai World</title>
  <link rel="stylesheet" href="pixel.css" />
  <!-- AOS CSS -->
<link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
</head>
<body>
  <header>
    <div class="logo">Hentai World</div>
    <nav>
      <a href="#">Home</a>
      <a href="categories.html">Categories</a>
      <a href="#">Artists</a>
      <a href="#" id="loginLink">Login</a>
       <a href="profile.html">Profile</a>
    </nav>
    <button id="themeToggle">üåô Toggle Theme</button>
  </header>

  <section class="search-bar">
    <input type="text" placeholder="Search..." />
  </section>

 <section class="featured">
  <h2>üî• Featured</h2>
  <div class="flex-grid"data-aos="fade-up">
    <div class="card"><img src="download (3).jpg" /></div>
    <div class="card"><img src="download (4).jpg" /></div>
    <div class="card"><img src="download (5).jpg" /></div>
    <div class="card"><img src="download (6).jpg" /></div>
    <div class="card"><img src="download (7).jpg" /></div>
    <div class="card"><img src="download (8).jpg" /></div>
     <div class="card"><img src="images (3).jpg" /></div>
  </div>
</section>

  <section class="latest">
  <h2>üÜï Latest Uploads</h2>
  <div class="latest-scroll">
    <div class="card"><img src="download.jpg" /></div>
    <div class="card"><img src="download (1).jpg" /></div>
    <div class="card"><img src="download (2).jpg" /></div>
    <div class="card"><img src="images (1).jpg" /></div>
    <div class="card"><img src="images (2).jpg" /></div>
    <div class="card"><img src="images (4).jpg" /></div>
    
  </div>
  <div id="latestGallery" class="latest-scroll">
    <!-- Dynamic uploads will appear here -->
  </div>

</section>

  <footer>
    <p>&copy; 2025 Hentai World</p>
    <div class="footer-links">
      <a href="#">About</a>
      <a href="#">Terms</a>
      <a href="#">Contact</a>
    </div>
  </footer>
  <div class="login-modal" id="loginModal">
  <div class="login-box">
    <h2>üîê Login</h2>
    <input type="text" id="loginUsername" placeholder="Username" />
<input type="password" id="loginPassword" placeholder="Password" />
<button id="loginBtn">Enter</button>
    <span class="close-btn" onclick="closeLogin()">‚úñ</span>
  </div>
</div>
<div class="signup-modal" id="signupModal">
  <div class="signup-box">
    <h2>üìù Sign Up</h2>
    <input type="text" id="signupUsername" placeholder="Username" />
<input type="email" id="signupEmail" placeholder="Email" />
<small id="emailFeedback" class="feedback"></small>
<input type="password" id="signupPassword" placeholder="Password" />
<small id="passwordFeedback" class="feedback"></small>
<input type="password" id="signupConfirm" placeholder="Confirm Password" />
<small id="confirmFeedback" class="feedback"></small>
<button id="signupBtn">Create Account</button>
    <span class="close-btn" onclick="closeSignup()">‚úñ</span>
  </div>
</div>
<script>
  const signupModal = document.getElementById('signupModal');

  // Add a new nav link for Sign Up
  const signupLink = document.createElement('a');
  signupLink.href = "#";
  signupLink.textContent = "Sign Up";
  signupLink.id = "signupLink";
  signupLink.addEventListener('click', (e) => {
    e.preventDefault();
    signupModal.style.display = 'flex';
  });

  document.querySelector('nav').appendChild(signupLink);

  function closeSignup() {
    signupModal.style.display = 'none';
  }
</script>
<script>
  const loginLink = document.querySelector('nav a[href="#"]:nth-child(4)');
  const loginModal = document.getElementById('loginModal');

  loginLink.addEventListener('click', (e) => {
    e.preventDefault();
    loginModal.style.display = 'flex';
  });

  function closeLogin() {
    loginModal.style.display = 'none';
  }
  document.addEventListener('DOMContentLoaded', () => {
  const user = JSON.parse(localStorage.getItem('user'));
  if (user) {
    showToast(`üëã Welcome back, ${user.username}!`);
    // Optionally hide login/signup links
    document.querySelector('nav a[href="#"]').textContent = "Logout";
  }
});
</script>
<script>
  // üîê Toggle Login Modal
  document.querySelector('.login-link')?.addEventListener('click', (e) => {
    e.preventDefault();
    document.getElementById('loginModal').style.display = 'flex';
  });

  function closeLogin() {
    document.getElementById('loginModal').style.display = 'none';
  }

  // üìù Toggle Sign-Up Modal
  document.querySelector('.signup-link')?.addEventListener('click', (e) => {
    e.preventDefault();
    document.getElementById('signupModal').style.display = 'flex';
  });

  function closeSignup() {
    document.getElementById('signupModal').style.display = 'none';
  }

  // üé¥ Card Hover Effects
  document.querySelectorAll('.card').forEach(card => {
    card.addEventListener('mouseenter', () => {
      card.style.transform = 'scale(1.05)';
    });
    card.addEventListener('mouseleave', () => {
      card.style.transform = 'scale(1)';
    });
  });

  // üîç Search Bar Activation
  document.querySelector('.search-bar input')?.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      alert(`Searching for: ${e.target.value}`);
    }
  });

  // üåô Dark Mode Toggle
  document.getElementById('themeToggle')?.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggleBtn = document.getElementById('themeToggle');

    if (toggleBtn) {
      toggleBtn.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');
      });
    }
  });
</script>
<!-- AOS JS -->
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>
  AOS.init({
    duration: 800, // animation speed
    once: true     // animate only once
  });
</script>
<script>
  function closePopup() {
    document.getElementById('welcomePopup').style.display = 'none';
    document.getElementById('uploadSection').style.display = 'block';
  }

  document.getElementById('uploadForm')?.addEventListener('submit', function(e) {
    e.preventDefault();
    const title = this.title.value;
    const hashtags = this.hashtags.value;
    const file = this.video.files[0];

    alert(`Uploading: ${title}\nTags: ${hashtags}\nFile: ${file.name}`);
    // TODO: send to backend
  });
</script>
<!-- üéâ Welcome Popup for Early Users -->
<div id="welcomePopup" class="popup">
  <div class="popup-content">
    <h2>üéâ Congratulations!</h2>
    <p>You‚Äôre one of the first 100 users on Hentai World. You‚Äôll enjoy free uploads ‚Äî forever.</p>
    <button onclick="closePopup()">Start Uploading</button>
  </div>
</div>
<!-- üì§ Upload Section -->
<section id="uploadSection" style="display: none;">
  <form id="uploadForm">
    <h2>üì§ Upload Your Video</h2>
    <input type="text" name="title" placeholder="Add a title..." required />
    <input type="text" name="hashtags" placeholder="#elf #uncensored #fantasy" required />
    <input type="file" name="video" accept="video/mp4,video/webm" required />
    <button type="submit">Upload</button>
  </form>
</section>
<script>
  document.getElementById('signupBtn').addEventListener('click', async () => {
  const username = document.getElementById('signupUsername').value;
  const email = document.getElementById('signupEmail').value;
  const password = document.getElementById('signupPassword').value;
  const confirm = document.getElementById('signupConfirm').value;

  if (password !== confirm) {
    showToast("‚ùå Passwords do not match", true);
    return;
  }

  try {
    const res = await fetch('http://localhost:3000/api/auth/signup', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ username, email, password })
    });

    const data = await res.json();
    if (res.ok) {
      showToast('‚úÖ Account created!');
      document.getElementById('signupModal').style.display = 'none';
    } else {
      showToast(data.error || "Unable to create account. Please try again.", true);
    }
  } catch (err) {
    showToast('‚ùå Network error', true);
  }
});

</script>
<script>
  function showToast(message, isError = false) {
    const toast = document.getElementById('toast');
    toast.textContent = message;
    toast.className = 'toast show' + (isError ? ' error' : '');
    setTimeout(() => toast.className = 'toast', 3000);
  }
</script>

<div id="toast" class="toast">Account created!</div>
<div id="toast" class="toast"></div>
<script>
  document.getElementById('signupEmail').addEventListener('input', () => {
  const email = document.getElementById('signupEmail').value;
  const feedback = document.getElementById('emailFeedback');
  if (/^[a-zA-Z0-9._%+-]+@gmail\.com$/.test(email)) {
    feedback.textContent = "‚úÖ Valid Gmail address";
    feedback.className = "feedback valid";
  } else {
    feedback.textContent = "‚ùå Must be a Gmail address";
    feedback.className = "feedback";
  }
});

document.getElementById('signupPassword').addEventListener('input', () => {
  const password = document.getElementById('signupPassword').value;
  const feedback = document.getElementById('passwordFeedback');
  let strength = "‚ùå Weak password";

  if (password.length >= 8 && /[A-Z]/.test(password) && /\d/.test(password) && /[^A-Za-z0-9]/.test(password)) {
    strength = "‚úÖ Strong password";
    feedback.className = "feedback valid";
  } else {
    feedback.className = "feedback";
  }

  feedback.textContent = strength;
});

document.getElementById('signupConfirm').addEventListener('input', () => {
  const password = document.getElementById('signupPassword').value;
  const confirm = document.getElementById('signupConfirm').value;
  const feedback = document.getElementById('confirmFeedback');

  if (confirm === password) {
    feedback.textContent = "‚úÖ Passwords match";
    feedback.className = "feedback valid";
  } else {
    feedback.textContent = "‚ùå Passwords do not match";
    feedback.className = "feedback";
  }
});
</script>
<script>
  document.getElementById('loginBtn').addEventListener('click', async () => {
    const username = document.getElementById('loginUsername').value;
    const password = document.getElementById('loginPassword').value;

    try {
      const res = await fetch('http://localhost:3000/api/auth/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
      });

      const data = await res.json();
      if (res.ok) {
        showToast("‚úÖ Login successful!");
        document.getElementById('loginModal').style.display = 'none';

        // Save user info locally
        localStorage.setItem('user', JSON.stringify(data.user));
        localStorage.setItem('token', data.token);
      } else {
        showToast(data.error || "‚ùå Login failed", true);
      }
    } catch (err) {
      showToast("‚ùå Network error", true);
    }
  });
</script>
</body>
</html>

